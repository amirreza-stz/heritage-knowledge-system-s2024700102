# Query 11: Find all SpiritualGuardians (people inferred as SpiritualGuardian)
# This query finds people who are inferred as SpiritualGuardian based on the OWL equivalent class axiom:
# A Person who hasRole some GuardianRole AND caresFor some SacredItem

PREFIX : <http://www.semanticweb.org/ubuntu/ontologies/2026/0/s2024700102heritage/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?person ?personLabel ?role ?roleLabel ?sacredItem ?sacredItemLabel ?accessLevel ?humanApproval
WHERE {
    ?person rdf:type :SpiritualGuardian .
    ?person rdfs:label ?personLabel .
    FILTER(LANG(?personLabel) = "en" || LANG(?personLabel) = "")
    ?person :hasRole ?role .
    ?role rdf:type :GuardianRole .
    ?role rdfs:label ?roleLabel .
    FILTER(LANG(?roleLabel) = "en" || LANG(?roleLabel) = "")
    ?person :caresFor ?sacredItem .
    ?sacredItem rdf:type :SacredItem .
    ?sacredItem rdfs:label ?sacredItemLabel .
    FILTER(LANG(?sacredItemLabel) = "en" || LANG(?sacredItemLabel) = "")
    OPTIONAL { ?person :hasAccessLevel ?accessLevel }
    OPTIONAL { ?person :humanApproval ?humanApproval }
}
ORDER BY ?personLabel
